(this.webpackJsonpchatoo=this.webpackJsonpchatoo||[]).push([[0],{47:function(e,t,a){},48:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(15),r=a.n(c),i=(a(47),a(6)),l=(a(48),a(9)),o=a(12),u=a(1),d=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],c=a[1],r=e.chatId,i=e.creds,d=function(e){e.preventDefault();var t=s.trim();0!==t.length&&Object(l.i)(i,r,{text:t}),c("")};return Object(u.jsxs)("form",{className:"message-form",onSubmit:d,children:[Object(u.jsx)("input",{className:"message-input",placeholder:"Send a message...",value:s,onChange:function(t){c(t.target.value),Object(l.f)(e,r)},onSubmit:d}),Object(u.jsx)("label",{htmlFor:"upload-button",children:Object(u.jsx)("span",{className:"image-button",children:Object(u.jsx)("i",{className:"fa fa-camera fa-fw picture-icon"})})}),Object(u.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){Object(l.i)(i,r,{files:e.target.files,text:""})}}),Object(u.jsx)("button",{type:"submit",className:"send-button",children:Object(u.jsx)("i",{className:"fa fa-paper-plane fa-fw"})})]})},m=function(e){var t,a=e.message;return(null===a||void 0===a||null===(t=a.attachments)||void 0===t?void 0:t.length)>0?Object(u.jsx)("img",{src:a.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right"}}):Object(u.jsx)("div",{className:"message",style:{float:"right",marginRight:18,color:"#fff",background:"#3b2a50"},children:a.text})},j=function(e){var t,a,n=e.message,s=e.lastMessage,c=!s||s.sender.username!==n.sender.username;return Object(u.jsxs)("div",{className:"message-row",children:[c&&Object(u.jsx)("div",{className:"message-avatar",style:{backgroundImage:"url(".concat(null===n||void 0===n||null===(t=n.sender)||void 0===t?void 0:t.avatar,")")}}),(null===n||void 0===n||null===(a=n.attachments)||void 0===a?void 0:a.length)>0?Object(u.jsx)("img",{src:n.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:c?4:48}}):Object(u.jsx)("div",{className:"message",style:{float:"left",background:"#cabcdc",marginLeft:c?4:48},children:n.text})]})},b=function(e){var t=e.chats,a=e.activeChat,n=e.userName,c=e.messages,r=t&&t[a],l=function(e,t){return r.people.map((function(a,n){var s;return a.last_read===e.id&&Object(u.jsx)("div",{className:"read-receipt",style:{float:t?"right":"left",backgroundImage:"url(".concat(null===a||void 0===a||null===(s=a.person)||void 0===s?void 0:s.avatar,")")}},"read-".concat(n))}))};return r?Object(u.jsx)(s.a.Fragment,{children:Object(u.jsxs)("div",{className:"chat-feed",children:[Object(u.jsxs)("div",{className:"chat-title-container",children:[Object(u.jsx)("button",{className:"sign-out-button",onClick:function(){return localStorage.clear(),void window.location.reload()},children:Object(u.jsx)("i",{className:"fa fa-sign-out-alt fa-fw"})}),Object(u.jsx)("div",{className:"chat-title",children:r.title}),Object(u.jsx)("div",{className:"chat-subtitle",children:r.people.map((function(e){return" ".concat(e.person.username)}))})]}),function(){var e=Object.keys(c);return e.map((function(t,a){var s=c[t],r=0===a?null:e[a-1],i=n===s.sender.username;return Object(u.jsxs)("div",{style:{width:"100%"},children:[Object(u.jsx)("div",{className:"message-block",children:i?Object(u.jsx)(m,{message:s}):Object(u.jsx)(j,{message:s,lastMessage:c[r]})}),Object(u.jsx)("div",{className:"read-receipts",style:{marginRight:i?18:0,marginLeft:i?0:68},children:l(s,i)})]},"msg-".concat(a))}))}(),Object(u.jsx)("div",{style:{height:30}}),Object(u.jsx)("div",{className:"message-form-container",children:Object(u.jsx)(d,Object(i.a)(Object(i.a)({},e),{},{chatId:a}))})]})}):Object(u.jsx)("p",{style:{textAlign:"center",marginTop:"2rem"},children:"Loading..."})},g=a(23),h=a.n(g),f=a(42),p=a(16),O=a(3),v=a.n(O),x=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),r=Object(o.a)(c,2),l=r[0],d=r[1],m=function(e){s(Object(i.a)(Object(i.a)({},a),{},Object(p.a)({},e.target.name,e.target.value)))},j=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={"Project-ID":"5466c855-7287-4d11-b633-36171ccbcf76","User-Name":a.username,"User-Secret":a.password},s={headers:n},e.prev=3,d(!0),e.next=7,v.a.get("https://api.chatengine.io/chats",s);case 7:localStorage.setItem("username",a.username),localStorage.setItem("password",a.password),window.location.reload(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),alert("An error occured: ".concat(e.t0)),d(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"login-screen",children:Object(u.jsxs)("form",{onSubmit:function(e){return j(e)},children:[Object(u.jsx)("h1",{children:"Chatoo"}),Object(u.jsx)("p",{children:"Your online chatting app."}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"Username",onChange:function(e){return m(e)},value:a.username,required:!0}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:function(e){return m(e)},value:a.password,required:!0}),Object(u.jsx)("button",{type:"submit",disabled:l,children:l?"Loading...":"Log In"})]})})},N=function(){return localStorage.getItem("username")?Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)(l.a,{height:"100vh",publicKey:"5466c855-7287-4d11-b633-36171ccbcf76",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return Object(u.jsx)(b,Object(i.a)({},e))}})}):Object(u.jsx)(x,{})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,95)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),w()}},[[92,1,2]]]);
//# sourceMappingURL=main.2fde8735.chunk.js.map